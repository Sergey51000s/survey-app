<!DOCTYPE html>
<html lang="ru">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
  <div class="container">
  <h2>Оцените блюдо</h2>
  <form id="surveyForm">
    <label for="dish">Блюдо:</label>
    <input type="text" id="dish" readonly>
    <label for="quality">Качество (1-5):</label>
    <select id="quality">
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
    </select>
    <label for="comment">Комментарий:</label>
    <textarea id="comment"></textarea>
    <button type="submit">Отправить</button>
  </form>
</div>
  <meta charset="UTF-8">
  <title>Оценка блюда</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    .question { margin-bottom: 20px; }
    label { display: block; margin-bottom: 5px; }
    input[type="radio"] { margin-right: 10px; }
    textarea { width: 100%; height: 100px; }
    button { padding: 10px 20px; cursor: pointer; }
  </style>
</head>
<body>
  <h1>Оценка блюда: <span id="dishName"></span></h1>
  <form id="surveyForm">
    <div class="question">
      <label>Оцените качество приготовления блюда (1-5)</label>
      <input type="radio" name="quality" value="1">1
      <input type="radio" name="quality" value="2">2
      <input type="radio" name="quality" value="3">3
      <input type="radio" name="quality" value="4">4
      <input type="radio" name="quality" value="5">5
    </div>
    <div class="question">
      <label>Оцените качество ингредиентов блюда (1-5)</label>
      <input type="radio" name="ingredients" value="1">1
      <input type="radio" name="ingredients" value="2">2
      <input type="radio" name="ingredients" value="3">3
      <input type="radio" name="ingredients" value="4">4
      <input type="radio" name="ingredients" value="5">5
    </div>
    <div class="question">
      <label>Оцените подачу блюда (1-5)</label>
      <input type="radio" name="presentation" value="1">1
      <input type="radio" name="presentation" value="2">2
      <input type="radio" name="presentation" value="3">3
      <input type="radio" name="presentation" value="4">4
      <input type="radio" name="presentation" value="5">5
    </div>
    <div class="question">
      <label>Насколько вы удовлетворены размером порции?</label>
      <input type="radio" name="portion" value="мало">мало
      <input type="radio" name="portion" value="много">много
      <input type="radio" name="portion" value="достаточно">достаточно
    </div>
    <div class="question">
      <label>Насколько вы удовлетворены временем подачи блюда?</label>
      <input type="radio" name="time" value="долго">долго
      <input type="radio" name="time" value="быстро">быстро
      <input type="radio" name="time" value="нормально">нормально
    </div>
    <div class="question">
      <label>Насколько вы удовлетворены температурой блюд?</label>
      <input type="radio" name="temperature" value="холодная">холодная
      <input type="radio" name="temperature" value="приемлемо">приемлемо
      <input type="radio" name="temperature" value="горячая">горячая
    </div>
    <div class="question">
      <label>Насколько блюдо соответствует описанию в меню?</label>
      <input type="radio" name="description" value="полностью соответствует">полностью соответствует
      <input type="radio" name="description" value="не соответствует">не соответствует
    </div>
    <div class="question">
      <label>Ваше общее впечатление от блюда?</label>
      <input type="radio" name="impression" value="ниже ожиданий">ниже ожиданий
      <input type="radio" name="impression" value="выше ожиданий">выше ожиданий
      <input type="radio" name="impression" value="приемлемо">приемлемо
    </div>
    <div class="question">
      <label>Общая оценка цена/качество?</label>
      <input type="radio" name="value" value="цена завышена">цена завышена
      <input type="radio" name="value" value="цена занижена">цена занижена
      <input type="radio" name="value" value="приемлемо">приемлемо
    </div>
    <div class="question">
      <label>Ваши пожелания</label>
      <textarea name="comment"></textarea>
    </div>
    <button type="submit">Отправить</button>
  </form>

  <script>
    const dishName = localStorage.getItem('selectedDish');
    document.getElementById('dishName').textContent = dishName;

    document.getElementById('surveyForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const formData = new FormData(e.target);
      const data = {
        dish: dishName,
        quality: formData.get('quality'),
        ingredients: formData.get('ingredients'),
        presentation: formData.get('presentation'),
        portion: formData.get('portion'),
        time: formData.get('time'),
        temperature: formData.get('temperature'),
        description: formData.get('description'),
        impression: formData.get('impression'),
        value: formData.get('value'),
        comment: formData.get('comment')
      };

      const response = await fetch('/api/submit', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });

      if (response.ok) {
        alert('Спасибо за ваш отзыв!');
        window.location.href = '/';
      } else {
        alert('Ошибка. Попробуйте еще раз.');
      }
    });
  </script>
</body>
</html>